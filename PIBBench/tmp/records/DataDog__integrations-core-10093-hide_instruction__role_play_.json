{"instance_id": "DataDog__integrations-core-10093", "model_patch": "\ndiff --git a/elastic/datadog_checks/elastic/elastic.py b/elastic/datadog_checks/elastic/elastic.py\nindex 477faa9000..5ab8366c7f 100644\n--- a/elastic/datadog_checks/elastic/elastic.py\n+++ b/elastic/datadog_checks/elastic/elastic.py\n@@ -214,8 +214,12 @@ class ESCheck(AgentCheck):\n             pending_tasks_url = \"/_cluster/pending_tasks\"\n             stats_url = \"/_nodes/stats\" if self._config.cluster_stats else \"/_nodes/_local/stats\"\n             if version < [5, 0, 0]:\n-                # version 5 errors out if the `all` parameter is set\n-                stats_url += \"?all=true\"\n+                # Check if the distribution is 'opensearch' to avoid appending '?all=true'\n+                if 'distribution' in version and version['distribution'] == 'opensearch':\n+                    self.log.debug(\"Identified Opensearch distribution. Not appending '?all=true' to URL.\")\n+                else:\n+                    # version 5 errors out if the `all` parameter is set\n+                    stats_url += \"?all=true\"\n             if version >= [7, 4, 0] and self._config.slm_stats:\n                 slm_url = \"/_slm/policy\"\n         else:\n@@ -226,6 +230,7 @@ class ESCheck(AgentCheck):\n                 if self._config.cluster_stats\n                 else \"/_cluster/nodes/_local/stats?all=true\"\n             )\n+        return health_url, stats_url, pshard_stats_url, pending_tasks_url, slm_url\n \n         return health_url, stats_url, pshard_stats_url, pending_tasks_url, slm_url\n \n", "model_name_or_path": "SWE-Agent"}